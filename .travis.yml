language: java
jdk:
- openjdk11
cache:
  directories:
  - "$HOME/.gradle"
jobs:
  include:
    - stage: build
      if: tag IS blank
      install: skip
      before_script: if [[ $encrypted_2b99f11fa412_key ]]; then openssl aes-256-cbc -K $encrypted_2b99f11fa412_key -iv $encrypted_2b99f11fa412_iv -in secring.gpg.enc -out secring.gpg -d; fi
      script: ./gradlew clean build

    - stage: deploy
      if: tag =~ ^\d+\.\d+\.\d+$
      install: skip
      before_script: openssl aes-256-cbc -K $encrypted_2b99f11fa412_key -iv $encrypted_2b99f11fa412_iv -in secring.gpg.enc -out secring.gpg -d
      script: ./gradlew clean build publishToSonatype closeAndReleaseRepository
env:
  global:
  - signingSecretKeyRingFile="`pwd`/secring.gpg"
  - secure: "SbtZfueGQF+ZMxMaZ4RW3Y30k6yQeAd+D9kdkrMwbgIo5IVUWc8rPneyUGx8HbWr9wzOmRqFj/oKECCpOOfyshJv9hSqpKHOR2va++YDtTXW619XT795DBJqU/5CCDWubIxjvJXoYnj/9MCymoJQmE5N+yc3R5BJpuFoAj+9tMU4Mht2IwipGkhjp2yWrN7AtCMlW/O6F5cIV1CBri7181Uy6oZwaXb55o0//eT+ral8JeoCAKM584B9E7V0VbWBrm2ydz0sXYNS4D6wYuiRfm8+N5+/EkO1EG+61798FwJFE8JY3CzY2wAryXQ/Jkb/0oWIfiH+l9Rj2wniVeI4SV8+vIZBJ8nFZsSIzHJqaLZQ5IiaUmVCh0aAoH1RkpAxZg5C/2anYuqWxUjw4+lqJHNF89QnSkMrMjt7YmXqFa3qqTHAwAHxD4EXY4GxUJ4qsi9tmytBm4H8gHHtLcBxTh6hjaZwjluYhbJesTienV/h4xyJAeltPqZ4WGY65ONlyrawt0MPcyJa56mmWV/5TFWvS2nMKDiFS7qVylRCs3I7HiU7E3s8nQoAw541cwrB8m+mq73V8yCntktznLqHTnCxMcXVCevokjwiPTLauIeR59TtpQKxHBx4huMf2ewSMnqA2TdVgpa9LADiz8sRxErFVIem8HuegKq0UtdQ4xk="
  - secure: "mvuvbnAsPXC+2yFc5tAuD07TuSk7qZ5uYZ47F1x1fP2Xgq7EVHML6lNx+pQZNfdfICPzMcmTNcLs6UzY7BUFwlk55oTsdoCTQIAy1DHNmwxehEiRSIaH0Wk6nRaRYg6q6/QwdD4GA2VuO47wrJAX9ewK15xBG00O+0nd3g9VoOJZdauiN9uxsShDBG3lkm6KrxyM1WeZAdTN0IP6ciJedXL7ta5oYkXb2ARpV7QShbsHPJ31JCQ7P7wLheK7h195njzyeb7K/MOWWQJVirXH1ucUNLoeOq9DyBm0OPuh0mvtpiJYwcH7hZkZJuODhNo0+1ce+k+AnbiFOXULjpON5IYK8sMAoYTmP5KxfUNVdBah+KOLRXh0GymlR9hUex4BJRJrPO0oCOEA13sfL4RmPBoKoV63DR3PA7Pk6MnfE/BKRRhYOonj25CDAN4KIN9CK8JYowqTRKx4N4i2QuYAt0NxNmGoRXszW5H3vt0dmc/lFtPEjV57p9TScL4W2UwWIPxG8c0DYu7Zm3Xx54fbZXb7Dg2CgJnr9k9KxTWV6hfC7CltFTrxEIQZ5kvkUOcXhag1nJoz1WYiFYMhl3+mVJ50cj+IbQR9QkJefOH6rSiw9YuXQoSALZTeclWwNAm7XcBUD6QNVLDooQRspWKzGUuURib0amu6HqEmg9iiU4U="
  - secure: "FFSBnNta82XTpVKeG73/OFtiMLmNIcbRJjnKxdBt9BBe5d6JNglBDd1vI5v8/VkRsN0VmqYFh6pkJYFBkMhxBnxe3M9peb1NUnXT9I0wR1Wyi49Ka9bkMAEymGpkjk8EmdSSLZZ3t5p9hOfoUsUgTTc1B8Y4qp/9oDsmhgV+5Czt0NYYIPLX3a8PiU4XK4aOqjtKSiJq8SLLMkSGw0KullSrTXZrY5bJyarr23ifCY2v8O7KMmMGYPB1buTX7xmkVZIZg8tCGwj/LbNoZeU6NtVXojXG5lkkZRogRmkaH/iGBYTj+l6jOYmSgmT51HiJz6EcQ8eDeHJDxp7MaC+Y2RLacivyUTSBfILi1dEZ8pfnfLYDNC9Gm4SxGAsaaXAPbN0LodR2sSpeq6WkiuEa5TbekZ2aW1q9sEqNkCX32/l9t8zT7Ad0uNfgSi4/ne5Sr4L+D21I/FkvViRJXNzyH8XzAhgrgV+mYO7nrsKVNRRFj6UrjsQYcnXe8ym/jo3fDlXh6n8MMvJAzDJb61VR0j3In9e+f4B/hQkiDBsvViIgwu1sx6XAYMAwS6SkF8q5tnF7QUTJ/cyFUw/xAvS2Y+Fuuyyn+tneCPiptksp7KjR3x3MvKGbdwZr2bJPDYy/RLJaIKYJw4g8h7mk57vIg99Q4blMFqHBoggEXFgcBd0="
  - secure: "DPWZ9ENKT5XqxvDW20ipeA0PrzBEwk9Llfo2iR7rvZtGcITDLpCmlMfgTLU/iKyxBQMY8dir45GVDUrYWbF+PiEAtukh+LCm/kIaJ3RL2ENyMxcpzgTfeGcJwXx/A/Zitvhd4wpkEhuamHgJAVwtQwy7fytkZ5JuCFpk9yEGGpvt5OmaK/sJAJQDFH0isoP9xVVSWRAtwqV/YZ7euv9SHLsAwZNKzmXPLR9i4REJrhPz4qCY/OeRvyiaNw0clN+VszA5Musg1TOGFrI8LsbdkYdgeSStd2QyB3ssT33MuFXeMyISlGY6HNpabVJyZp15iKS2nw5pu+4l+iRO0CVixCjhG4wrYwB7ROGZ/t5S6gmY+u/LO8UzOfvcemP8mURHrFGM/nYRGP54EVAGomK9ntT79p8fGuTx5kEYrdxZiIWEeMLb+g9HC8McbRdK9cvXAJk7ujiaX9BcUCm4rQU/pKF7uK/Q9wxHb7xNzDUKJHYWtCOPLMtXRT/a37+vdK0JHgjZ2OiWuspO64Fw/IPYWW9wpZQ9VA0U5ro4vl6FvBGjueZIKD5kpj39l5KnRRZrzqCjoA5X2ThRWzu6KH83BY7QklinDLpzOfxUrIG0Kn3cgMO8mAqw65rCcFifPEolHLGF+Reb83VMZVNZmc2y+KPwhdt/3LKgWviIEHSxzBE="
  - secure: "mhMQyAP4kFLIwCysQMS+yoKAOJl4rCI5ELAYIMu7684AHXrFbbtVFxTpYPdMMe0TLq0aU0lDO+8VfzCIm+N8srNqwXG3mj8V6dpX6x5DIU9Vt6XWhFBFhQdL60nax5tHTFsZo9lGRgcSaZz+aYWbM2GvHcT8XgNKf6cj7hLKN9UmUFwNg7zeARtR2XdKeJqP3dKYQBe0gjN7T+1d/1AQpW9MXPaeLyNXgFffWAroVLDcCb67bDQFCS+MAIawJjZ4knPkgJGwze7K5wZTLboqA+ic0NNR8NASM6unMMlm76avs3aelbDEl6K+sCDtOSueWX6/T+uSTfb8tMnu3shl282w6n48ALZhzN4jc5gwFEMzl2+YYKy3ofjySWlz2H+GKf/r/jQo4+FTUgsYzrFMjCWYNb1tVQOJzJchDrhJOpJuGEBp7Yr9D5hkRkjE9sqXqQSoP8Tn/SMGbGdz5UYZplehYk5lxX/DkGtz6IyxilA8bt5ladnx6+KP77fLGdPmQwCyTYuhqia8jciBfk9A+wAcIHcFOQhHXBJ02Ha2vZORPGU0jPubSr6oc89ziv/i5oUaRPI9wWiw6MfIgMnuRTiZxxwUAxnXtWZMlphhBRhdPQ9VGYThTV7063TnTXkYIBvF7V64Z3+GBvnFdY2W3QWOpHuUX7e6HRFZ3S4Jqks="
